<div class="text-center"><h2>Oferta bazowa : </h2></div>
<div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h5 class="text-center">{{vm.baseMarketOffer.game.title}} ({{vm.baseMarketOffer.game.yearOfProduction}})
                ({{vm.baseMarketOffer.game.platform.platform}})</h5>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-lg-4" align="center">
                    <a ng-if="vm.baseMarketOffer.game.coverImage"
                       ng-click="vm.openFile(vm.baseMarketOffer.game.coverImageContentType, marketOffer.game.coverImage)">
                        <img
                            data-ng-src=" {{'data:' + vm.baseMarketOffer.game.coverImageContentType + ';base64,' +
                                vm.baseMarketOffer.game.coverImage}}" style="height: 300px; width: 200px;"/>
                    </a>
                    <a ng-if="!vm.baseMarketOffer.game.coverImage" class="thumbnail" style="height: 160px;width: 120px;">
                        <img src="/content/images/hipster.png">
                    </a>
                </div>
                <div class="col-lg-4" align="center">
                    <h2> Gra</h2>
                    <p ng-class="vm.baseMarketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : vm.baseMarketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Tytuł : {{vm.baseMarketOffer.game.title}}</p><br/>
                    <p ng-class="vm.baseMarketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : vm.baseMarketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Producent: {{vm.baseMarketOffer.game.producer}}</p><br/>
                    <p ng-class="vm.baseMarketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : vm.baseMarketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Typ gry: {{vm.baseMarketOffer.game.gameType.gameType}}</p><br/>
                    <p ng-class="vm.baseMarketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : vm.baseMarketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Platforma : {{vm.baseMarketOffer.game.platform.platform}}
                    </p>
                </div>
                <div class="col-lg-4" align="center">
                    <h2>Oferta</h2>
                    <p class="label label-primary"
                       ng-bind="vm.baseMarketOffer.createDate | date:'MM/dd/yyyy hh:mm'">
                        {{vm.baseMarketOffer.createDate}}</p><br/>
                    <p ng-show="vm.baseMarketOffer.offerType == 'SELL'" class="label label-primary">Typ oferty: Sprzedaż</p>
                    <p ng-show="vm.baseMarketOffer.offerType == 'BUY'" class="label label-primary">Typ oferty: Kupno</p>
                    <p ng-show="vm.baseMarketOffer.offerType == 'EXCHANGE'" class="label label-primary">Typ oferty: Wymiana</p>
                    <br/>
                    <p class="label label-primary" ng-hide="vm.baseMarketOffer.price == 0">Cena:
                        {{vm.baseMarketOffer.price}}</p><br/>
                    <p class="label label-primary" ng-show="vm.baseMarketOffer.gameState == 'NEW'">Stan gry: Nowa</p>
                    <p class="label label-primary" ng-show="vm.baseMarketOffer.gameState == 'USED'">Stan gry: Używana</p>
                    <br/>
                    <p class="label label-primary"><a
                        ui-sref="gamer-profile-detail({id:vm.baseMarketOffer.createProfile.id})">Profil: {{vm.baseMarketOffer.createProfile.name}}</a>
                    </p><br/>
                    <p class="label label-primary">Miasto: {{vm.baseMarketOffer.createProfile.adress.city}}</p><br/>
                </div>
            </div>
            <div class="row"><br/></div>
        </div>
    </div>
</div>

<div class="row" align="center">
<button ng-click="vm.changeSameCity()"
        ng-class="vm.gamefinderDTO.sameCity == true ? 'btn btn-success' : 'btn btn-danger'">Te samo miasto
</button>
<button ng-click="vm.changePerfectMatching()"
        ng-class="vm.gamefinderDTO.perfectMatch == true ? 'btn btn-success' : 'btn btn-danger'">Perfekcyjne dopasowanie
</button>
    <button ui-sref="market-offer-my" class="btn btn-success">Powrót do ofert</button>
</div>
<div class="text-center"><h2>Propozycje: </h2></div>
<div ng-repeat="marketOffer in vm.matchedOffers track by marketOffer.id">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="text-center">{{marketOffer.game.title}} ({{marketOffer.game.yearOfProduction}})
                ({{marketOffer.game.platform.platform}})</h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-lg-4" align="center">
                    <a ng-if="marketOffer.game.coverImage"
                       ng-click="vm.openFile(marketOffer.game.coverImageContentType, marketOffer.game.coverImage)">
                        <img
                            data-ng-src=" {{'data:' + marketOffer.game.coverImageContentType + ';base64,' +
                                marketOffer.game.coverImage}}" style="height: 300px; width: 200px;"/>
                    </a>
                    <a ng-if="!marketOffer.game.coverImage" class="thumbnail" style="height: 160px;width: 120px;">
                        <img src="/content/images/hipster.png">
                    </a>
                </div>
                <div class="col-lg-4" align="center">
                    <h2> Gra</h2>
                    <p ng-class="marketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : marketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Tytuł : {{marketOffer.game.title}}</p><br/>
                    <p ng-class="marketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : marketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Producent: {{marketOffer.game.producer}}</p><br/>
                    <p ng-class="marketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : marketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Typ gry: {{marketOffer.game.gameType.gameType}}</p><br/>
                    <p ng-class="marketOffer.game.platform.platform.indexOf('Playstation') != -1 ?
                 'label label-info' : marketOffer.game.platform.platform.indexOf('Xbox') != -1 ? 'label label-success' : 'label label-primary'">
                        Platforma : {{marketOffer.game.platform.platform}}
                    </p>
                </div>
                <div class="col-lg-4" align="center">
                    <h2>Oferta</h2>
                    <p class="label label-primary"
                       ng-bind="marketOffer.createDate | date:'MM/dd/yyyy hh:mm'">
                        {{marketOffer.createDate}}</p><br/>
                    <p ng-show="marketOffer.offerType == 'SELL'" class="label label-primary">Typ oferty: Sprzedaż</p>
                    <p ng-show="marketOffer.offerType == 'BUY'" class="label label-primary">Typ oferty: Kupno</p>
                    <p ng-show="marketOffer.offerType == 'EXCHANGE'" class="label label-primary">Typ oferty: Wymiana</p>
                    <br/>
                    <p class="label label-primary" ng-hide="marketOffer.price == 0">Cena:
                        {{marketOffer.price}}</p><br/>
                    <p class="label label-primary" ng-show="marketOffer.gameState == 'NEW'">Stan gry: Nowa</p>
                    <p class="label label-primary" ng-show="marketOffer.gameState == 'USED'">Stan gry: Używana</p>
                    <br/>
                    <p class="label label-primary"><a
                        ui-sref="gamer-profile-detail({id:marketOffer.createProfile.id})">Profil: {{marketOffer.createProfile.name}}</a>
                    </p><br/>
                    <p class="label label-primary">Miasto: {{marketOffer.createProfile.adress.city}}</p><br/>
                </div>
            </div>
            <div class="row"><br/></div>
            <div class="row">
                <div class="text-center">
                    <button type="submit"
                            ui-sref="market-offer-detail({id:marketOffer.id})"
                            class="btn btn-primary btn-sm">
                        <span class="glyphicon glyphicon-eye-open"></span>
                        <span class="">Show this offer</span>
                    </button>
                    <button type="submit"
                            ui-sref="game.edit({id:game.id})"
                            class="btn btn-primary btn-sm"
                            has-authority="ROLE_ADMIN">
                        <span class="glyphicon glyphicon-pencil"></span>
                        <span class="hidden-xs hidden-sm">Edit</span>
                    </button>
                    <button type="button"
                            ui-sref="game.delete({id:game.id})"
                            class="btn btn-danger btn-sm"
                            has-authority="ROLE_ADMIN">
                        <span class="glyphicon glyphicon-remove-circle"></span>
                        <span class="hidden-xs hidden-sm">Delete</span>
                    </button>
                    <button type="button"
                            class="btn btn-success btn-sm"
                            ng-if="marketOffer.offerType == 'SELL' || marketOffer.offerType == 'BUY'"
                            ng-click="vm.finalizeOffer(marketOffer.id);">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span class="">Make transaction</span>
                    </button>
                    <button type="button"
                            ui-sref="trade-offer.new({marketOfferId: marketOffer.id})"
                            class="btn btn-success btn-sm"
                            ng-if="marketOffer.offerType == 'EXCHANGE'">
                        <span class="glyphicon glyphicon-gift"></span>
                        <span class="">Make a trade offer</span>
                    </button>
                    <button type="button"
                            class="btn btn-info btn-sm"
                            ng-click="vm.sendMessage(marketOffer.createProfile.id)">
                        <span class="glyphicon glyphicon-envelope"></span>
                        <span class="">Send message</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
